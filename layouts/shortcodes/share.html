<!-- 文章分享按钮 - Shortcode 版本 -->
<div class="share-buttons">
    <div class="share-title">Share This Article</div>
    <div class="share-icons">
        <!-- Twitter/X -->
        <a href="https://twitter.com/intent/tweet?text={{ .Page.Title | urlquery }}&url={{ .Page.Permalink | urlquery }}" 
           target="_blank" 
           rel="noopener noreferrer" 
           class="share-button twitter"
           title="分享到 Twitter">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
            </svg>
            <span>Twitter</span>
        </a>

        <!-- Facebook -->
        <a href="https://www.facebook.com/sharer/sharer.php?u={{ .Page.Permalink | urlquery }}" 
           target="_blank" 
           rel="noopener noreferrer" 
           class="share-button facebook"
           title="分享到 Facebook">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
            </svg>
            <span>Facebook</span>
        </a>

        <!-- LinkedIn -->
        <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ .Page.Permalink | urlquery }}&title={{ .Page.Title | urlquery }}" 
           target="_blank" 
           rel="noopener noreferrer" 
           class="share-button linkedin"
           title="分享到 LinkedIn">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
            </svg>
            <span>LinkedIn</span>
        </a>

        <!-- 微博 -->
        <a href="https://service.weibo.com/share/share.php?url={{ .Page.Permalink | urlquery }}&title={{ .Page.Title | urlquery }}" 
           target="_blank" 
           rel="noopener noreferrer" 
           class="share-button weibo"
           title="分享到微博">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                <path d="M10.098 20.323c-3.977.391-7.414-1.406-7.672-4.02-.259-2.609 2.759-5.047 6.74-5.441 3.979-.394 7.413 1.404 7.671 4.018.259 2.6-2.759 5.049-6.737 5.443h-.002zm8.859-3.697c-.337-.109-.562-.185-.388-.68.377-.99.415-1.845.003-2.456-.773-1.129-2.886-1.068-5.298-.003 0 0-.759.343-.565-.281.371-1.234.315-2.267-.313-2.863-1.423-1.348-5.209.051-8.462 3.127-2.432 2.299-3.84 4.736-3.84 7.046 0 4.134 5.326 6.651 10.537 6.651 6.835 0 11.386-3.971 11.386-7.127 0-1.903-1.604-2.977-3.059-3.414h.002-.003zm1.755-7.098c-.358-.105-.602-.157-.436-.661.369-.94.408-1.75.003-2.33-.766-1.071-2.845-.994-5.218-.002 0 0-.75.327-.558-.269.366-1.176.31-2.16-.308-2.722C12.77 1.927 7.99 3.24 5.28 6.113 3.147 8.355 2 10.553 2 12.578c0 3.935 5.236 6.331 10.365 6.331 6.722 0 11.193-3.785 11.193-6.785 0-1.812-1.575-2.832-3.006-3.254l.16-.062z"/>
            </svg>
            <span>微博</span>
        </a>

        <!-- 微信 -->
        <button class="share-button wechat" 
                onclick="showWechatQR()" 
                title="分享到微信">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                <path d="M8.691 2.188C3.891 2.188 0 5.476 0 9.53c0 2.212 1.17 4.203 3.002 5.55a.59.59 0 0 1 .213.665l-.39 1.48c-.019.07-.048.141-.048.213 0 .163.13.295.29.295a.326.326 0 0 0 .167-.054l1.903-1.114a.864.864 0 0 1 .717-.098 10.16 10.16 0 0 0 2.837.403c.276 0 .543-.027.811-.05-.857-2.578.157-5.523 3.317-6.523 1.552-.49 3.234-.465 4.768.064-.611-3.413-4.096-6.173-8.596-6.173h-.002zm-2.43 5.399a.96.96 0 0 1 .962-.962.96.96 0 0 1 .961.962.96.96 0 0 1-.961.961.96.96 0 0 1-.961-.96l-.001-.001zm5.813 0a.96.96 0 0 1 .961-.962.96.96 0 0 1 .962.962.96.96 0 0 1-.962.961.96.96 0 0 1-.961-.96v-.001zM16.5 8.936c-4.318 0-7.818 2.718-7.818 6.063 0 3.345 3.5 6.062 7.818 6.062 1.002 0 1.959-.156 2.853-.43.396-.116.652-.06.978.137l1.467.86c.116.068.24.137.378.137.116 0 .213-.137.213-.289 0-.096-.04-.193-.068-.289l-.308-1.147c-.068-.212.02-.425.157-.577 1.406-1.096 2.308-2.674 2.308-4.464 0-3.345-3.5-6.062-7.818-6.062l-.16-.001zm-2.268 3.959a.744.744 0 0 1 .744-.744.744.744 0 0 1 .744.744.744.744 0 0 1-.744.744.744.744 0 0 1-.744-.744zm4.535 0a.744.744 0 0 1 .744-.744.744.744 0 0 1 .744.744.744.744 0 0 1-.744.744.744.744 0 0 1-.744-.744z"/>
            </svg>
            <span>微信</span>
        </button>

        <!-- 复制链接 -->
        <button class="share-button copy-link" 
                onclick="copyLink()" 
                title="复制链接">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
            </svg>
            <span>复制链接</span>
        </button>
    </div>
</div>

<!-- 微信二维码弹窗 -->
<div id="wechat-qr-modal" class="modal" onclick="closeWechatQR()">
    <div class="modal-content" onclick="event.stopPropagation()">
        <span class="close" onclick="closeWechatQR()">&times;</span>
        <h3>微信扫码分享</h3>
        <div id="qrcode"></div>
        <p class="qr-hint">使用微信扫描二维码分享此文章</p>
    </div>
</div>

<!-- 分享按钮 JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
<script>
    // 复制链接功能
    function copyLink() {
        const url = window.location.href;
        
        if (navigator.clipboard && navigator.clipboard.writeText) {
            navigator.clipboard.writeText(url).then(function() {
                showCopyNotification('链接已复制到剪贴板！');
            }, function(err) {
                fallbackCopyTextToClipboard(url);
            });
        } else {
            fallbackCopyTextToClipboard(url);
        }
    }

    // 降级复制方法
    function fallbackCopyTextToClipboard(text) {
        const textArea = document.createElement("textarea");
        textArea.value = text;
        textArea.style.position = "fixed";
        textArea.style.top = "0";
        textArea.style.left = "0";
        textArea.style.width = "2em";
        textArea.style.height = "2em";
        textArea.style.padding = "0";
        textArea.style.border = "none";
        textArea.style.outline = "none";
        textArea.style.boxShadow = "none";
        textArea.style.background = "transparent";
        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();

        try {
            const successful = document.execCommand('copy');
            if (successful) {
                showCopyNotification('链接已复制到剪贴板！');
            } else {
                showCopyNotification('复制失败，请手动复制');
            }
        } catch (err) {
            showCopyNotification('复制失败，请手动复制');
        }

        document.body.removeChild(textArea);
    }

    // 显示复制通知
    function showCopyNotification(message) {
        const notification = document.createElement('div');
        notification.className = 'copy-notification';
        notification.textContent = message;
        document.body.appendChild(notification);

        setTimeout(() => {
            notification.classList.add('show');
        }, 10);

        setTimeout(() => {
            notification.classList.remove('show');
            setTimeout(() => {
                document.body.removeChild(notification);
            }, 300);
        }, 2000);
    }

    // 显示微信二维码
    let qrcodeInstance = null;
    function showWechatQR() {
        const modal = document.getElementById('wechat-qr-modal');
        const qrcodeDiv = document.getElementById('qrcode');
        
        // 清空之前的二维码
        qrcodeDiv.innerHTML = '';
        
        // 生成新的二维码
        qrcodeInstance = new QRCode(qrcodeDiv, {
            text: window.location.href,
            width: 200,
            height: 200,
            colorDark: "#000000",
            colorLight: "#ffffff",
            correctLevel: QRCode.CorrectLevel.H
        });
        
        modal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
    }

    // 关闭微信二维码
    function closeWechatQR() {
        const modal = document.getElementById('wechat-qr-modal');
        modal.style.display = 'none';
        document.body.style.overflow = 'auto';
    }

    // ESC 键关闭弹窗
    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
            closeWechatQR();
        }
    });
</script>

